{% extends '_base.html' %}

{% block content %}
<div class="portfolio-container">
    <div class="transactions-container">
        <h2>Your Transactions</h2>
        <div class="transactions-table">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Merchant</th>
                    </tr>
                </thead>
                <tbody>
                    {% for t in transactions %}
                    <tr>
                        <td>{{ t.date }}</td>
                        <td>{{ t.transaction_type }}</td>
                        <td>{{ t.amount }}</td>
                        <td>{{ t.merchant }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="graph-container">
        <h2>Your balance graph</h2>
        <div class="graph-section">
            <h2>Select a time period to view the balance graph.</h2>
            <form method="POST">
                <div class="time-period-buttons">
                    <button type="submit" name="time_period" value="1W">1 Week</button>
                    <button type="submit" name="time_period" value="1M">1 Month</button>
                    <button type="submit" name="time_period" value="6M">6 Months</button>
                    <button type="submit" name="time_period" value="1Y">1 Year</button>
                    <button type="submit" name="time_period" value="ALL">All</button>
                </div>
            </form>
            <br>
            {% if graph_url %}
            <div class="graph-container">
                <img src="data:image/png;base64,{{ graph_url }}" alt="Balance Graph">
            </div>
            {% else %}
            <p>No graph available. Select a time period to generate one.</p>
            {% endif %}
        </div>
    </div>
</div>

{% endblock content %}
